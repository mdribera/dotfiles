#!/bin/bash

# Get the parent directory of this script
DFDIR=$(cd $(dirname "$1") && pwd -P)/$(basename "$1")
# Shellfish
DF_SHELL="${DFDIR}shell"

# copy function
function copy_from_dir() {
    for f in $(ls -a "$1"); do
        if ( [ ! -r "$HOME/$f" ] || [ "$(readlink -n "$HOME/$f")" != "$1/$f" ] ) &&
            [ $f != "." ] && [ $f != ".." ] &&
            [ $f != ".DS_Store" ] &&
            [ $f != ".git" ] &&
            [ $f != ".gitignore" ] ; then
            echo "LINKING $f"
            if ([ -e "$HOME/$f" ] ||
                [ -L "$HOME/$f" ]); then
                rm -r "$HOME/$f"
            fi
            ln -s "$1/$f" "$HOME/$f"
        fi
    done
}

copy_from_dir $DF_SHELL
